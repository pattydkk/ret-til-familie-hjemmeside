â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
   INITIALISERINGS-RÃ†KKEFÃ˜LGE - FORHINDRER WORDPRESS CRASH
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Dette dokument forklarer hvordan systemet initialiseres sikkert
for at forhindre WordPress crash.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ” SIKKERHEDSLAG
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

LEVEL 1: ABSPATH Check
-----------------------
if (!defined('ABSPATH')) {
    exit; // Forhindrer direct file access
}

LEVEL 2: Emergency Mode
------------------------
if (defined('RTF_EMERGENCY_MODE') && RTF_EMERGENCY_MODE) {
    // Load kun basic WordPress funktioner
    // Stop alt andet for at forhindre crashes
    return;
}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“Š INITIALISERINGS-RÃ†KKEFÃ˜LGE (KRITISK!)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

FASE 1: CONSTANTS (Ã˜jeblikkeligt)
----------------------------------
âœ“ RTF_VERSION
âœ“ RTF_THEME_DIR
âœ“ RTF_THEME_URI

Disse SKAL defineres FÃ˜RST fÃ¸r noget andet.

FASE 2: COMPOSER AUTOLOAD (Med fejlhÃ¥ndtering)
-----------------------------------------------
TRY:
  âœ“ Load vendor/autoload.php
  âœ“ SÃ¦t $rtf_vendor_loaded = true
CATCH:
  âœ— Log fejl
  âœ— Vis admin notice
  âœ— STOP initialisering (return)
  âœ— WordPress fortsÃ¦tter men UDEN platform features

Dette forhindrer fatal errors hvis vendor/ mangler!

FASE 3: USER SYSTEM CLASS (Kun hvis vendor OK)
-----------------------------------------------
TRY:
  âœ“ Require class-rtf-user-system.php
  âœ“ SÃ¦t $rtf_user_system_loaded = true
CATCH:
  âœ— Log fejl
  âœ— FortsÃ¦t uden user system

FASE 4: THEME SETUP (WordPress Hook: after_setup_theme)
--------------------------------------------------------
âœ“ add_theme_support('title-tag')
âœ“ add_theme_support('post-thumbnails')
âœ“ add_image_size()
âœ“ register_nav_menus()

Prioritet: 10 (standard)

FASE 5: USER SYSTEM INIT (WordPress Hook: init, prioritet 1)
-------------------------------------------------------------
TRY:
  âœ“ Instantiate new RtfUserSystem()
  âœ“ SÃ¦t global $rtf_user_system
CATCH:
  âœ— Log fejl
  âœ— $rtf_user_system forbliver null

Prioritet: 1 (meget tidligt i init)

FASE 6: SESSION START (WordPress Hook: init, prioritet 1)
----------------------------------------------------------
âœ“ Check session_status()
âœ“ Start session hvis ikke allerede startet

Prioritet: 1 (samme som user system)

FASE 7: ENQUEUE ASSETS (WordPress Hook: wp_enqueue_scripts)
------------------------------------------------------------
âœ“ Bootstrap CSS
âœ“ Font Awesome
âœ“ Custom CSS
âœ“ jQuery
âœ“ Bootstrap JS

Prioritet: 10 (standard)

FASE 8: DATABASE INIT (WordPress Hook: init, prioritet 999)
------------------------------------------------------------
âœ“ Check if already initialized (get_option)
âœ“ Verify WordPress is ready
TRY:
  âœ“ Create all 11 tables
  âœ“ Mark as initialized
CATCH:
  âœ— Log fejl
  âœ— Will retry on next page load

Prioritet: 999 (SIDST i init - efter alt andet)

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ¯ PWA INITIALISERING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PWA initialiseres i BROWSEREN, IKKE i PHP!

I header.php:
-------------
1. <link rel="manifest" href="/manifest.json">
2. <script src="/pwa-init.js" defer></script>

PWA Scripts kÃ¸res EFTER DOM er loaded:
---------------------------------------
1. pwa-init.js
   â†“
2. Check if service worker supported
   â†“
3. Register sw.js
   â†“
4. Service worker aktiveres
   â†“
5. Cache assets
   â†“
6. Enable offline mode

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš ï¸  HVAD SKER VED FEJL?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

SCENARIO 1: vendor/ mangler
----------------------------
1. vendor/autoload.php findes ikke
2. $rtf_vendor_loaded = false
3. Admin notice vises i WordPress admin
4. Theme loader KUN basic WordPress features
5. Platform features er ikke tilgÃ¦ngelige
6. WordPress crasher IKKE
7. Upload vendor/ â†’ GenindlÃ¦s â†’ Alt virker

SCENARIO 2: User system class fejler
-------------------------------------
1. class-rtf-user-system.php loader ikke
2. $rtf_user_system = null
3. Platform pages checker for $rtf_user_system
4. Hvis null â†’ Redirect til error page
5. WordPress crasher IKKE

SCENARIO 3: Database init fejler
---------------------------------
1. dbDelta() fails
2. Fejl logges
3. get_option('rtf_db_initialized_v2') = false
4. Ved nÃ¦ste page load prÃ¸ves igen
5. WordPress crasher IKKE

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âœ… VERIFIKATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Check WordPress error log for disse beskeder:

SUCCESS beskeder:
âœ“ "RTF SUCCESS: Composer autoload loaded"
âœ“ "RTF SUCCESS: User system class loaded"
âœ“ "RTF SUCCESS: User system initialized"
âœ“ "RTF SUCCESS: Database initialized with all tables"

WARNING beskeder (ikke kritiske):
âš  "RTF WARNING: vendor/autoload.php not found"
âš  "RTF WARNING: class-rtf-user-system.php not found"

ERROR beskeder (krÃ¦ver handling):
âœ— "RTF ERROR: Composer autoload failed"
âœ— "RTF ERROR: User system init failed"
âœ— "RTF ERROR: Database initialization failed"

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ”§ FEJLHÃ…NDTERING
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

PROBLEM: "RTF WARNING: vendor/autoload.php not found"
FIX: Upload vendor/ folder via FTP

PROBLEM: "RTF ERROR: User system init failed"
FIX: Check PHP error log for detaljer
     Verify database connection virker

PROBLEM: "RTF ERROR: Database initialization failed"
FIX: Check MySQL user har CREATE TABLE rettigheder
     Verify database connection settings i wp-config.php

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ RÃ†KKEFÃ˜LGE RESUMÃ‰
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. Security checks (ABSPATH, Emergency mode)
2. Define constants
3. Load Composer (med fejlhÃ¥ndtering)
4. Load User System class (med fejlhÃ¥ndtering)
5. WordPress 'after_setup_theme' â†’ Theme setup
6. WordPress 'init' prioritet 1 â†’ User system + Sessions
7. WordPress 'wp_enqueue_scripts' â†’ CSS/JS assets
8. WordPress 'init' prioritet 999 â†’ Database initialization
9. Browser â†’ PWA initialization

ALT er fejlsikkert og forhindrer WordPress crash!

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸš€ DEPLOYMENT TJEKLISTE
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

â–¡ Upload alle theme filer
â–¡ Upload vendor/ folder (KRITISK!)
â–¡ Aktiver theme i WordPress
â–¡ Check error log for SUCCESS beskeder
â–¡ Test /platform-auth/ virker
â–¡ Verificer database tabeller er oprettet
â–¡ Test PWA install prompt vises pÃ¥ mobil
â–¡ Verificer Stripe keys er konfigureret

Hvis ALT viser SUCCESS â†’ System er LIVE! ğŸ‰
